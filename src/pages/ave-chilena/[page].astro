---
import Layout from "../../layouts/Layout.astro";
import type {Bird} from "../../interfaces/Bird";
import Card from "../../components/Card.astro";
import type {GetStaticPaths} from "astro";

export const getStaticPaths = (async ({paginate}) => {
    const response = await fetch('https://aves.ninjas.cl/api/birds');
    const birds = (await response.json()) as Bird[];

    return paginate(birds, {pageSize: 9});
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Layout title="Aves Chilenas">
    <div class="mx-auto mt-8 w-full flex justify-center flex-col">
        <main class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

            {
                page.data.map((bird: Bird) => (
                    <Card bird={bird}/>
                ))
            }
        </main>
        <nav class="flex px-10 mt-10 gap-2 justify-center">
            <a class="btn" href="">Anterior</a>
            <span class="btn-gray">(Total {page.total})</span>
            <a class="btn" href="">Siguiente</a>
        </nav>
    </div>
</Layout>

<style>
    .btn {
        @apply bg-blue-500 text-white font-bold py-2 px-4 rounded;
    }
    .btn:hover {
        @apply bg-blue-700;
    }
    .btn-gray {
        @apply bg-gray-500 text-white font-bold py-2 px-4 rounded;
    }
</style>
